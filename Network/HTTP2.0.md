# HTTP2.0 🐱o(=•ェ•=)m
> [资料](https://blog.csdn.net/weixin_45462681/article/details/113519269)

> 主要基于SPDY协议
## 新增特性
### 多路复用

  HTTP/2 可以很容易的去实现多流并行而不用依赖建立多个 TCP 连接，HTTP/2 把 HTTP 协议通信的基本单位缩小为一个一个的帧，这些帧对应着逻辑流中的消息。并行地在同一个 TCP 连接上双向交换消息。

  HTTP2.0中,基于二进制分帧层，HTTP2.0可以在共享TCP连接的基础上同时发送请求和响应。HTTP消息被分解为独立的帧，而不破坏消息本身的语义，交错发出去，在另一端根据流标识符和首部将他们重新组装起来。 通过该技术，可以避免HTTP旧版本的队头阻塞问题，极大提高传输性能。

### 二进制分帧

  在应用层（HTTP）和传输层（TCP）之间增加一个二进制分帧层。
  帧 -> 通信的最小单位

  HTTP 性能优化的关键并不在于高带宽，而是低延迟。TCP 连接会随着时间进行自我「调谐」，起初会限制连接的最大速度，如果数据成功传输，会随着时间的推移提高传输的速度。这种调谐则被称为 TCP 慢启动。由于这种原因，让原本就具有突发性和短时性的 HTTP 连接变的十分低效。HTTP/2 通过让所有数据流共用同一个连接，可以更有效地使用 TCP 连接，让高带宽也能真正的服务于 HTTP 的性能提升

### 头部压缩

  为此SPDY和HTTP2.0出现了。SPDY是用的是DEFLATE算法，而HTTP2.0则使用了专门为首部压缩设计的HPACK算法。

  在客户端和服务端建立“字典” 记录之前发送的键值对，对于相同的数据，不再通过每次请求和相应发送。

  请求1发送了所有的字段，请求2只需要发送差异数据。

### 服务端推送

  服务器可以对一个客户端请求发送多个响应

## 存在の问题
### 队头阻塞？

  HTTP2.0通过分帧并且给每个帧加上ID避免互相影响的问题，对方接受到帧之后根据id进行拼接。这样就可以做到乱序相应从而避免请求时的队头阻塞问题。但是tcp层面的队头阻塞是HTTP2.0无法解决的，（HTTP应用层，TCP传输层）。TCP的阻塞问题是因为传输阶段可能会丢包，丢包后需要等待重新传送，阻塞后续传输。