## 真实DOM

用我们传统的开发模式，原生JS或JQ操作DOM时，浏览器会从构建DOM树开始从头到尾执行一遍流程。在一次操作中，我需要更新10个DOM节点，浏览器收到第一个DOM请求后并不知道还有9次更新操作，因此会马上执行流程，最终执行10次。例如，第一次计算完，紧接着下一个DOM更新请求，这个节点的坐标值就变了，前一次计算为无用功。计算DOM节点坐标值等都是白白浪费的性能。即使计算机硬件一直在迭代更新，操作DOM的代价仍旧是昂贵的，频繁操作还是会出现页面卡顿，影响用户体验。

## 虚拟DOM

为了解决浏览器性能问题 虚拟DOM被设计出来，若一次操作中更新了10次DOM, 虚拟DOM不会立即操作真实DOM, 而是对这10次更新的diff内容保存到一个js对象中，最终将这个对象一次性渲染到真实DOM上，避免大量的计算量，等待更新完成后，由浏览器去绘制。

要将操作映射到虚拟DOM上需要diff算法去实现.

diff算法只平级比较两棵树的节点。 复杂度O(n)  
在diff比较的过程中，循环从两边向中间收拢
tag不相同，直接删掉重建, 通过key来标识区分相同节点

在实际代码中，会对新旧两棵树进行一个深度的遍历，每个节点都会有一个标记。每遍历到一个节点就把该节点和新的树进行对比，如果有差异就记录到一个对象中。


react 和 vue diff算法 的 异同

- 相同： 深度优先， 同级比较， 标签不同 直接删掉重建， 都借助key区别

- 不同：react基于链表，不能双向查找  vue基于数组 方便双向查找

